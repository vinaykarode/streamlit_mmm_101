<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matched Market Tests - Interactive Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #1a202c;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .scenario {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .scenario-title {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .scenario-text {
            color: #4a5568;
            line-height: 1.6;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
        }

        button:hover:not(:disabled) {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            color: #a0aec0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: 700;
            transition: all 0.3s;
        }

        .step.active .step-circle {
            background: #667eea;
            color: white;
            transform: scale(1.2);
        }

        .step.complete .step-circle {
            background: #48bb78;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #718096;
            font-weight: 600;
        }

        .visualization-area {
            margin: 30px 0;
            min-height: 400px;
        }

        .markets-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .market-group {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }

        .market-header {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-test {
            background: #c6f6d5;
            color: #22543d;
        }

        .badge-control {
            background: #fed7d7;
            color: #742a2a;
        }

        .market-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .market-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .market-card.matched {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .market-name {
            font-weight: 700;
            color: #2d3748;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .market-info {
            font-size: 13px;
            color: #4a5568;
            margin-bottom: 4px;
        }

        .similarity-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .similarity-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease-out;
            width: 0;
        }

        .similarity-fill.animate {
            animation: fillBar 1s ease-out forwards;
        }

        @keyframes fillBar {
            from { width: 0; }
        }

        @keyframes slideIn {
            from {
                transform: translateX(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .highlight {
            background: #fef5e7;
            padding: 20px;
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
            margin: 20px 0;
        }

        .highlight-title {
            font-weight: 700;
            color: #92400e;
            margin-bottom: 10px;
        }

        .highlight-text {
            color: #78350f;
            line-height: 1.6;
        }

        .matched-pairs {
            margin-top: 30px;
        }

        .pair-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            opacity: 0;
            animation: slideIn 0.5s ease-out forwards;
        }

        .pair-connector {
            font-size: 24px;
            color: #48bb78;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .result-label {
            font-size: 12px;
            color: #718096;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-value {
            font-size: 36px;
            font-weight: 700;
            color: #2d3748;
        }

        .result-subtext {
            font-size: 14px;
            color: #4a5568;
            margin-top: 4px;
        }

        .sales-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 700;
            margin-top: 8px;
        }

        .lift-positive {
            background: #c6f6d5;
            color: #22543d;
        }

        .lift-flat {
            background: #e2e8f0;
            color: #4a5568;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            margin: 20px 0;
        }

        .chart-title {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .bar-chart {
            display: flex;
            gap: 30px;
            align-items: flex-end;
            height: 200px;
            margin-top: 20px;
        }

        .bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .bar {
            width: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px 8px 0 0;
            transition: height 1s ease-out;
            position: relative;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 10px;
        }

        .bar-value {
            color: white;
            font-weight: 700;
            font-size: 18px;
        }

        .bar-label {
            margin-top: 10px;
            font-weight: 600;
            color: #2d3748;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üó∫Ô∏è Matched Market Tests: Real Example</h1>
        
        <div class="scenario">
            <div class="scenario-title">üì∫ Scenario: Regional TV Advertising Campaign</div>
            <div class="scenario-text">
                You're testing a new TV advertising campaign for a retail chain with 200 stores across 20 markets.
                <br><br>
                <strong>Question:</strong> Does TV advertising actually drive in-store sales, or is it wasted spend?
                <br><br>
                <strong>The Approach:</strong> Run TV ads in 10 markets, hold back 10 similar markets as controls.
                <ul style="margin: 10px 0 0 20px; line-height: 1.8;">
                    <li>Test Period: 8 weeks</li>
                    <li>Budget: $2M in TV spend across test markets</li>
                    <li>Measurement: In-store sales lift in test vs control markets</li>
                </ul>
            </div>
        </div>

        <div class="controls">
            <button id="step1Btn" onclick="app.showStep1()">Step 1: Identify Markets</button>
            <button id="step2Btn" onclick="app.showStep2()" disabled>Step 2: Calculate Similarity</button>
            <button id="step3Btn" onclick="app.showStep3()" disabled>Step 3: Match Markets</button>
            <button id="step4Btn" onclick="app.showStep4()" disabled>Step 4: Measure Impact</button>
            <button onclick="app.reset()" style="margin-left: auto; background: #718096;">‚Ü∫ Reset</button>
        </div>

        <div class="step-indicator">
            <div class="step" id="indicator1">
                <div class="step-circle">1</div>
                <div class="step-label">Available Markets</div>
            </div>
            <div class="step" id="indicator2">
                <div class="step-circle">2</div>
                <div class="step-label">Similarity Scores</div>
            </div>
            <div class="step" id="indicator3">
                <div class="step-circle">3</div>
                <div class="step-label">Matched Pairs</div>
            </div>
            <div class="step" id="indicator4">
                <div class="step-circle">4</div>
                <div class="step-label">Sales Impact</div>
            </div>
        </div>

        <div class="visualization-area" id="vizArea"></div>
    </div>

    <script>
        // Market data
        const marketData = {
            test: [
                { name: 'Portland, OR', population: 2.5, stores: 12, baseline: 850, similarity: 0.94, lift: 18 },
                { name: 'Austin, TX', population: 2.3, stores: 11, baseline: 820, similarity: 0.91, lift: 22 },
                { name: 'Denver, CO', population: 2.9, stores: 14, baseline: 920, similarity: 0.89, lift: 15 },
                { name: 'Nashville, TN', population: 1.9, stores: 9, baseline: 710, similarity: 0.87, lift: 19 },
                { name: 'Charlotte, NC', population: 2.6, stores: 13, baseline: 880, similarity: 0.93, lift: 17 }
            ],
            control: [
                { name: 'Seattle, WA', population: 2.4, stores: 12, baseline: 840, similarity: 0.94, lift: 2 },
                { name: 'San Antonio, TX', population: 2.4, stores: 11, baseline: 810, similarity: 0.91, lift: 1 },
                { name: 'Salt Lake City, UT', population: 2.8, stores: 14, baseline: 910, similarity: 0.89, lift: 3 },
                { name: 'Memphis, TN', population: 1.8, stores: 9, baseline: 700, similarity: 0.87, lift: 0 },
                { name: 'Raleigh, NC', population: 2.7, stores: 13, baseline: 870, similarity: 0.93, lift: 2 }
            ]
        };

        const app = {
            currentStep: 0,
            matches: [],

            reset() {
                this.currentStep = 0;
                this.matches = [];
                document.getElementById('step1Btn').disabled = false;
                document.getElementById('step2Btn').disabled = true;
                document.getElementById('step3Btn').disabled = true;
                document.getElementById('step4Btn').disabled = true;
                
                for (let i = 1; i <= 4; i++) {
                    document.getElementById(`indicator${i}`).classList.remove('active', 'complete');
                }
                
                document.getElementById('vizArea').innerHTML = '';
            },

            updateStepIndicator(step) {
                for (let i = 1; i <= 4; i++) {
                    const indicator = document.getElementById(`indicator${i}`);
                    indicator.classList.remove('active');
                    if (i < step) {
                        indicator.classList.add('complete');
                    }
                }
                document.getElementById(`indicator${step}`).classList.add('active');
            },

            showStep1() {
                this.currentStep = 1;
                this.updateStepIndicator(1);
                document.getElementById('step2Btn').disabled = false;

                const avgTestBaseline = (marketData.test.reduce((sum, m) => sum + m.baseline, 0) / marketData.test.length).toFixed(0);
                const avgControlBaseline = (marketData.control.reduce((sum, m) => sum + m.baseline, 0) / marketData.control.length).toFixed(0);

                const html = `
                    <h2 style="color: #2d3748; margin-bottom: 20px;">Step 1: Available Markets</h2>
                    
                    <div class="highlight" style="margin-bottom: 30px;">
                        <div class="highlight-title">üéØ The Setup</div>
                        <div class="highlight-text">
                            We have 20 potential markets. We'll run TV ads in 10 (test) and hold back 10 (control).
                            <br><br>
                            <strong>Key Metrics to Match:</strong>
                            <ul style="margin: 10px 0 0 20px;">
                                <li>Population size (market reach)</li>
                                <li>Number of stores (distribution)</li>
                                <li>Baseline sales (pre-campaign performance)</li>
                            </ul>
                            <br>
                            Goal: Find control markets that look identical to test markets before the campaign starts.
                        </div>
                    </div>

                    <div class="markets-container">
                        <div class="market-group">
                            <div class="market-header">
                                <span>üì∫ Test Markets</span>
                                <span class="badge badge-test">TV Ads ON</span>
                            </div>
                            ${marketData.test.map(market => `
                                <div class="market-card">
                                    <div class="market-name">${market.name}</div>
                                    <div class="market-info">Population: ${market.population}M | Stores: ${market.stores}</div>
                                    <div class="market-info">Baseline Sales: $${market.baseline}K/week</div>
                                </div>
                            `).join('')}
                            <div style="margin-top: 15px; padding: 10px; background: white; border-radius: 6px;">
                                <strong>Avg Baseline: $${avgTestBaseline}K/week</strong>
                            </div>
                        </div>
                        <div class="market-group">
                            <div class="market-header">
                                <span>‚ùå Control Markets</span>
                                <span class="badge badge-control">No TV Ads</span>
                            </div>
                            ${marketData.control.map(market => `
                                <div class="market-card">
                                    <div class="market-name">${market.name}</div>
                                    <div class="market-info">Population: ${market.population}M | Stores: ${market.stores}</div>
                                    <div class="market-info">Baseline Sales: $${market.baseline}K/week</div>
                                </div>
                            `).join('')}
                            <div style="margin-top: 15px; padding: 10px; background: white; border-radius: 6px;">
                                <strong>Avg Baseline: $${avgControlBaseline}K/week</strong>
                            </div>
                        </div>
                    </div>
                `;
                document.getElementById('vizArea').innerHTML = html;
            },

            showStep2() {
                this.currentStep = 2;
                this.updateStepIndicator(2);
                document.getElementById('step3Btn').disabled = false;

                const html = `
                    <h2 style="color: #2d3748; margin-bottom: 20px;">Step 2: Calculate Market Similarity</h2>
                    
                    <div class="highlight" style="margin-bottom: 30px;">
                        <div class="highlight-title">üìä Similarity Score Calculation</div>
                        <div class="highlight-text">
                            For each potential pair, we calculate similarity based on:
                            <br><br>
                            <strong>Formula:</strong> Weighted distance across demographics, store count, and historical sales
                            <br><br>
                            Higher scores (90%+) = Very similar markets (good match)
                            <br>
                            Lower scores (<80%) = Different markets (poor match)
                        </div>
                    </div>

                    <div class="markets-container">
                        <div class="market-group">
                            <div class="market-header">
                                <span>üì∫ Test Markets</span>
                            </div>
                            ${marketData.test.map(market => `
                                <div class="market-card">
                                    <div class="market-name">${market.name}</div>
                                    <div class="market-info">Pop: ${market.population}M | Stores: ${market.stores} | Sales: $${market.baseline}K</div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                        <span style="font-size: 12px; color: #667eea; font-weight: 700;">Match Score: ${(market.similarity * 100).toFixed(0)}%</span>
                                    </div>
                                    <div class="similarity-bar">
                                        <div class="similarity-fill animate" style="width: ${market.similarity * 100}%"></div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="market-group">
                            <div class="market-header">
                                <span>‚ùå Control Markets</span>
                            </div>
                            ${marketData.control.map(market => `
                                <div class="market-card">
                                    <div class="market-name">${market.name}</div>
                                    <div class="market-info">Pop: ${market.population}M | Stores: ${market.stores} | Sales: $${market.baseline}K</div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                        <span style="font-size: 12px; color: #667eea; font-weight: 700;">Match Score: ${(market.similarity * 100).toFixed(0)}%</span>
                                    </div>
                                    <div class="similarity-bar">
                                        <div class="similarity-fill animate" style="width: ${market.similarity * 100}%"></div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                document.getElementById('vizArea').innerHTML = html;
            },

            showStep3() {
                this.currentStep = 3;
                this.updateStepIndicator(3);
                document.getElementById('step4Btn').disabled = false;

                // Create matched pairs
                this.matches = marketData.test.map((test, idx) => ({
                    test,
                    control: marketData.control[idx]
                }));

                const html = `
                    <h2 style="color: #2d3748; margin-bottom: 20px;">Step 3: Matched Market Pairs</h2>
                    
                    <div class="highlight" style="margin-bottom: 30px;">
                        <div class="highlight-title">‚úÖ Perfect Matches Found</div>
                        <div class="highlight-text">
                            Each test market is paired with a control market that has:
                            <ul style="margin: 10px 0 0 20px;">
                                <li>Similar population size (¬±5%)</li>
                                <li>Same number of stores (¬±1)</li>
                                <li>Nearly identical baseline sales (¬±5%)</li>
                            </ul>
                            <br>
                            <strong>Found ${this.matches.length} matched pairs</strong> with 90%+ similarity scores
                            <br><br>
                            Now we can run TV ads in test markets and measure the difference!
                        </div>
                    </div>

                    <div class="matched-pairs">
                        ${this.matches.map((pair, idx) => `
                            <div class="pair-container" style="animation-delay: ${idx * 0.1}s">
                                <div class="market-card matched">
                                    <div class="market-name">${pair.test.name}</div>
                                    <span class="badge badge-test">Test Market</span>
                                    <div class="market-info" style="margin-top: 8px;">Pop: ${pair.test.population}M | Stores: ${pair.test.stores}</div>
                                    <div class="market-info">Baseline: $${pair.test.baseline}K/week</div>
                                    <div class="market-info" style="color: #667eea; font-weight: 700; margin-top: 6px;">
                                        Match Quality: ${(pair.test.similarity * 100).toFixed(0)}%
                                    </div>
                                </div>
                                <div class="pair-connector">‚ü∑</div>
                                <div class="market-card matched">
                                    <div class="market-name">${pair.control.name}</div>
                                    <span class="badge badge-control">Control Market</span>
                                    <div class="market-info" style="margin-top: 8px;">Pop: ${pair.control.population}M | Stores: ${pair.control.stores}</div>
                                    <div class="market-info">Baseline: $${pair.control.baseline}K/week</div>
                                    <div class="market-info" style="color: #667eea; font-weight: 700; margin-top: 6px;">
                                        Match Quality: ${(pair.control.similarity * 100).toFixed(0)}%
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                document.getElementById('vizArea').innerHTML = html;
            },

            showStep4() {
                this.currentStep = 4;
                this.updateStepIndicator(4);

                const avgTestLift = (marketData.test.reduce((sum, m) => sum + m.lift, 0) / marketData.test.length).toFixed(1);
                const avgControlLift = (marketData.control.reduce((sum, m) => sum + m.lift, 0) / marketData.control.length).toFixed(1);
                const incrementalLift = (avgTestLift - avgControlLift).toFixed(1);

                const totalTestBaseline = marketData.test.reduce((sum, m) => sum + m.baseline, 0);
                const incrementalSales = (totalTestBaseline * (incrementalLift / 100) * 8).toFixed(0); // 8 weeks
                const tvSpend = 2000; // $2M
                const roas = (incrementalSales / tvSpend).toFixed(2);

                const html = `
                    <h2 style="color: #2d3748; margin-bottom: 20px;">Step 4: Measure Sales Impact</h2>
                    
                    <div class="highlight" style="margin-bottom: 30px;">
                        <div class="highlight-title">üéØ The Results Are In</div>
                        <div class="highlight-text">
                            After 8 weeks of TV advertising:
                            <br><br>
                            <strong>Test Markets (TV ON):</strong> +${avgTestLift}% sales lift
                            <br>
                            <strong>Control Markets (TV OFF):</strong> +${avgControlLift}% sales lift
                            <br>
                            <strong>Incremental Lift from TV:</strong> ${incrementalLift}%
                            <br><br>
                            <strong>Financial Impact:</strong>
                            <br>
                            ‚Ä¢ Incremental Sales: $${incrementalSales}K
                            <br>
                            ‚Ä¢ TV Spend: $${tvSpend}K
                            <br>
                            ‚Ä¢ ROAS: ${roas}x
                            <br><br>
                            TV advertising drove real, measurable sales growth!
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Sales Lift Comparison</div>
                        <div class="bar-chart">
                            <div class="bar-group">
                                <div class="bar" style="height: ${avgTestLift * 10}px; background: linear-gradient(180deg, #48bb78 0%, #38a169 100%);">
                                    <div class="bar-value">+${avgTestLift}%</div>
                                </div>
                                <div class="bar-label">Test Markets<br/>(TV Ads ON)</div>
                            </div>
                            <div class="bar-group">
                                <div class="bar" style="height: ${avgControlLift * 10}px; background: linear-gradient(180deg, #cbd5e0 0%, #a0aec0 100%);">
                                    <div class="bar-value" style="color: #2d3748;">+${avgControlLift}%</div>
                                </div>
                                <div class="bar-label">Control Markets<br/>(No TV Ads)</div>
                            </div>
                            <div class="bar-group">
                                <div class="bar" style="height: ${incrementalLift * 10}px; background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);">
                                    <div class="bar-value">+${incrementalLift}%</div>
                                </div>
                                <div class="bar-label">Incremental Impact<br/>(True Causal Lift)</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: #f0fff4; border: 2px solid #48bb78; border-radius: 12px; padding: 20px; margin-top: 30px;">
                        <h3 style="color: #2f855a; margin-bottom: 15px;">‚úÖ Campaign Success Metrics</h3>
                        <div class="results-grid">
                            <div class="result-card" style="border-color: #48bb78;">
                                <div class="result-label">Incremental Sales</div>
                                <div class="result-value" style="color: #2f855a;">$${incrementalSales}K</div>
                                <div class="result-subtext">Over 8 weeks</div>
                            </div>
                            <div class="result-card" style="border-color: #48bb78;">
                                <div class="result-label">True Lift</div>
                                <div class="result-value" style="color: #2f855a;">${incrementalLift}%</div>
                                <div class="result-subtext">Causal impact</div>
                            </div>
                            <div class="result-card" style="border-color: #48bb78;">
                                <div class="result-label">ROAS</div>
                                <div class="result-value" style="color: #2f855a;">${roas}x</div>
                                <div class="result-subtext">Return on ad spend</div>
                            </div>
                        </div>
                    </div>

                    <div class="matched-pairs" style="margin-top: 30px;">
                        <h3 style="color: #2d3748; margin-bottom: 15px;">Market-by-Market Results</h3>
                        ${this.matches.map((pair, idx) => `
                            <div class="pair-container" style="animation-delay: ${idx * 0.1}s">
                                <div class="market-card matched">
                                    <div class="market-name">${pair.test.name}</div>
                                    <div class="market-info">Baseline: $${pair.test.baseline}K ‚Üí Post: $${(pair.test.baseline * (1 + pair.test.lift/100)).toFixed(0)}K</div>
                                    <span class="sales-badge lift-positive">+${pair.test.lift}% lift</span>
                                </div>
                                <div style="font-size: 16px; color: #48bb78; font-weight: 700;">
                                    Œî ${(pair.test.lift - pair.control.lift).toFixed(0)}%
                                </div>
                                <div class="market-card matched">
                                    <div class="market-name">${pair.control.name}</div>
                                    <div class="market-info">Baseline: $${pair.control.baseline}K ‚Üí Post: $${(pair.control.baseline * (1 + pair.control.lift/100)).toFixed(0)}K</div>
                                    <span class="sales-badge lift-flat">+${pair.control.lift}% lift</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                document.getElementById('vizArea').innerHTML = html;
            }
        };

        // Auto-start
        window.addEventListener('load', () => {
            app.reset();
        });
    </script>
</body>
</html>