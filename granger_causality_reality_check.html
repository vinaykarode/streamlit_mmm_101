<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The No-BS Guide to Granger Causality in Marketing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            background: white;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            font-style: italic;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        h2 {
            color: #34495e;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            color: #34495e;
            margin: 20px 0 15px 0;
        }
        
        .truth-bomb {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .percentage-bar {
            background: #ecf0f1;
            border-radius: 20px;
            overflow: hidden;
            margin: 10px 0;
            height: 30px;
            position: relative;
        }
        
        .percentage-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            display: flex;
            align-items: center;
            padding-left: 10px;
            color: white;
            font-weight: bold;
            transition: width 1s ease;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        
        .highlight {
            background: #f39c12;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .simulator {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        button.secondary {
            background: #48bb78;
        }
        
        button.secondary:hover {
            background: #38a169;
        }
        
        button.danger {
            background: #f56565;
        }
        
        button.danger:hover {
            background: #e53e3e;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .result-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .result-card.winner {
            border-color: #48bb78;
            background: #f0fff4;
        }
        
        .metric {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
            margin: 10px 0;
        }
        
        .metric-label {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .variable-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .variable-item {
            padding: 8px;
            background: white;
            border-radius: 5px;
            font-size: 0.9em;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .variable-item.selected {
            border-color: #48bb78;
            background: #f0fff4;
            font-weight: bold;
        }
        
        .variable-item.rejected {
            opacity: 0.4;
            text-decoration: line-through;
        }
        
        .emoji-verdict {
            font-size: 3em;
            text-align: center;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ The No-BS Guide to Granger Causality</h1>
            <p class="subtitle">What it actually does vs. what people think it does</p>
        </header>

        <div class="card">
            <h2>The Brutal Truth in 30 Seconds</h2>
            <div class="truth-bomb">
                Granger Causality: A test that checks if X happens before Y and helps predict it. 
                That's it. Not causation. Not magic. Just temporal correlation with extra steps.
            </div>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h3>‚úÖ What Granger ACTUALLY Does</h3>
                    <ul>
                        <li>Tests if X's past helps predict Y's future</li>
                        <li>Finds temporal ordering (what comes first)</li>
                        <li>Gives you a p-value (yes/no answer)</li>
                        <li>Works for linear relationships</li>
                    </ul>
                </div>
                
                <div class="comparison-item">
                    <h3>‚ùå What Granger DOESN'T Do</h3>
                    <ul>
                        <li>Prove actual causation</li>
                        <li>Tell you effect size (HOW MUCH)</li>
                        <li>Handle non-linear relationships well</li>
                        <li>Work with small samples (<100 obs)</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The 95/5 Reality Check</h2>
            
            <div style="margin: 20px 0;">
                <h3>95% of Marketing Questions:</h3>
                <div class="percentage-bar">
                    <div class="percentage-fill" style="width: 95%;">
                        "HOW MUCH does TV drive sales?" (Need effect size, not yes/no)
                    </div>
                </div>
            </div>
            
            <div style="margin: 20px 0;">
                <h3>5% Where Granger Might Help:</h3>
                <div class="percentage-bar">
                    <div class="percentage-fill" style="width: 5%; background: linear-gradient(90deg, #48bb78, #38a169);">
                        "Does weather affect sales AT ALL?"
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The Rooster and Sunrise Problem</h2>
            <div class="warning">
                <strong>üêì Classic Granger Fallacy:</strong><br>
                Rooster crows ‚Üí Sunrise (Granger says: ‚úì Significant!)<br>
                Does rooster CAUSE sunrise? Obviously not.<br><br>
                <strong>üõçÔ∏è Marketing Equivalent:</strong><br>
                Google searches ‚Üí Purchases (Granger says: ‚úì Significant!)<br>
                Do searches CAUSE purchases? Maybe not - people search AFTER deciding to buy.
            </div>
        </div>

        <div class="card">
            <h2>Better Alternatives for Every Use Case</h2>
            <table>
                <thead>
                    <tr>
                        <th>What You're Trying to Do</th>
                        <th>Granger Approach</th>
                        <th>Better Alternative</th>
                        <th>Why It's Better</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Find lag structure</td>
                        <td>Test significance at each lag</td>
                        <td>Cross-correlation function</td>
                        <td>Shows magnitude, not just yes/no</td>
                    </tr>
                    <tr>
                        <td>Select variables</td>
                        <td>Test each variable separately</td>
                        <td>LASSO/Ridge regression</td>
                        <td>Handles all variables at once</td>
                    </tr>
                    <tr>
                        <td>Prove causation</td>
                        <td>Show temporal precedence</td>
                        <td>Run an experiment</td>
                        <td>Actually proves causation</td>
                    </tr>
                    <tr>
                        <td>Measure ROI</td>
                        <td>Can't do this at all</td>
                        <td>Incrementality test</td>
                        <td>Gives you actual $$$ impact</td>
                    </tr>
                    <tr>
                        <td>Competitive dynamics</td>
                        <td>Test who leads whom</td>
                        <td>Actually useful here!</td>
                        <td>One of few good use cases</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>When People Actually Use Granger (The Honest Version)</h2>
            
            <div class="code-block">
# How Granger selection really happens in practice:

1. Include everything client thinks matters ‚úì
2. Add competitors if data available ‚úì
3. Add seasonality and holidays ‚úì
4. Let regularization kill weak variables ‚úì
5. Check business logic on survivors ‚úì

6. "Hmm, should weather be in here?"
7. Run Granger test
8. Include anyway because CEO insists ü§∑
            </div>
        </div>

        <div class="card">
            <h2>The One-Sentence Summary</h2>
            <div class="truth-bomb" style="background: linear-gradient(135deg, #38a169 0%, #48bb78 100%);">
                Granger causality is the appendix of statistical methods - evolution left it there, 
                it occasionally gets inflamed and causes problems, removing it changes nothing, 
                but statisticians know what it is so they keep checking it.
            </div>
        </div>

        <div class="card simulator">
            <h2>üéÆ Variable Selection Simulator</h2>
            <p>Let's simulate selecting variables from 100 potential marketing factors for your MMM. 
            See how different methods compare in speed, accuracy, and usefulness.</p>
            
            <div class="button-group">
                <button onclick="simulateGranger()">üêå Granger Causality (Slow & Limited)</button>
                <button onclick="simulateLASSO()" class="secondary">‚ö° LASSO (Fast & Effective)</button>
                <button onclick="simulateRidge()" class="secondary">üéØ Ridge (Balanced)</button>
                <button onclick="simulateBusinessLogic()" class="danger">üß† Business Logic (Reality)</button>
            </div>
            
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Running analysis...</p>
            </div>
            
            <div id="simulationResults"></div>
            
            <div id="variableDisplay"></div>
        </div>

        <div class="card">
            <h2>The Professional's Cheat Sheet</h2>
            
            <div class="success">
                <strong>‚úÖ Use Granger When Someone Says:</strong>
                <ul>
                    <li>"Does competitor pricing affect us at all?" ‚Üí Test it</li>
                    <li>"How long before we see effects?" ‚Üí Find the lag</li>
                    <li>"Who's the market leader?" ‚Üí Check who moves first</li>
                </ul>
            </div>
            
            <div class="warning">
                <strong>‚ùå Don't Use Granger When Someone Asks:</strong>
                <ul>
                    <li>"What's the ROI?" ‚Üí Run incrementality test</li>
                    <li>"How should we allocate budget?" ‚Üí Use MMM coefficients</li>
                    <li>"Is this campaign working?" ‚Üí Look at actual performance</li>
                    <li>"Should we include TV spend?" ‚Üí Of course you should</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>The Bottom Line</h2>
            <div class="emoji-verdict">
                üèÜ Winner: Simple Methods + Common Sense<br>
                ü•â Third Place: Granger Causality<br>
                ‚ùì What's Second? Literally anything else
            </div>
            
            <p style="text-align: center; font-size: 1.2em; margin-top: 20px;">
                <strong>Time to learn Granger: 1 hour ‚è∞</strong><br>
                <strong>Times you'll actually need it: Maybe twice in your career ü§∑</strong><br>
                <strong>Value of knowing when NOT to use it: Priceless üíé</strong>
            </p>
        </div>
    </div>

    <script>
        // Generate realistic marketing variables
        const generateVariables = () => {
            const channels = ['TV', 'Radio', 'Facebook', 'Google', 'YouTube', 'Instagram', 'TikTok', 'Email', 'SMS', 'Direct Mail'];
            const metrics = ['Spend', 'Impressions', 'Clicks', 'Reach', 'Frequency'];
            const competitors = ['Competitor_A', 'Competitor_B', 'Competitor_C'];
            const external = ['Weather', 'Unemployment', 'Gas_Prices', 'Stock_Market', 'COVID_Cases', 'Interest_Rates'];
            const seasonal = ['Holiday', 'Weekend', 'Month', 'Quarter', 'Back_to_School', 'Black_Friday'];
            const brand = ['Brand_Awareness', 'Consideration', 'NPS', 'Sentiment'];
            const misc = ['Price', 'Promotions', 'Store_Count', 'Website_Traffic', 'App_Downloads', 'Reviews'];
            
            let variables = [];
            
            // Add channel-metric combinations
            channels.forEach(channel => {
                metrics.forEach(metric => {
                    variables.push(`${channel}_${metric}`);
                });
            });
            
            // Add other variables
            variables = variables.concat(
                competitors.map(c => `${c}_Spend`),
                competitors.map(c => `${c}_Price`),
                external,
                seasonal,
                brand,
                misc
            );
            
            // Shuffle and limit to 100
            return variables.sort(() => Math.random() - 0.5).slice(0, 100);
        };

        const showLoading = (show) => {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        };

        const displayResults = (method, results) => {
            const resultsDiv = document.getElementById('simulationResults');
            resultsDiv.innerHTML = `
                <h3>Results: ${method}</h3>
                <div class="results-grid">
                    <div class="result-card ${results.winner ? 'winner' : ''}">
                        <div class="metric">${results.time}</div>
                        <div class="metric-label">Time to Run</div>
                    </div>
                    <div class="result-card">
                        <div class="metric">${results.selected}/${results.total}</div>
                        <div class="metric-label">Variables Selected</div>
                    </div>
                    <div class="result-card">
                        <div class="metric">${results.useful}</div>
                        <div class="metric-label">Actually Useful</div>
                    </div>
                    <div class="result-card">
                        <div class="metric">${results.interpretability}</div>
                        <div class="metric-label">Interpretability</div>
                    </div>
                </div>
                <div class="warning" style="margin-top: 20px;">
                    <strong>Reality Check:</strong> ${results.reality}
                </div>
            `;
        };

        const displayVariables = (selected, rejected, method) => {
            const variables = generateVariables();
            const varDiv = document.getElementById('variableDisplay');
            
            varDiv.innerHTML = `
                <h3>Selected Variables (${method})</h3>
                <div class="variable-list">
                    ${variables.map(v => {
                        const isSelected = selected.includes(v);
                        const isRejected = rejected.includes(v);
                        return `<div class="variable-item ${isSelected ? 'selected' : ''} ${isRejected ? 'rejected' : ''}">
                            ${v}
                        </div>`;
                    }).join('')}
                </div>
            `;
        };

        const simulateGranger = () => {
            showLoading(true);
            
            setTimeout(() => {
                const selected = [
                    'TV_Spend', 'Google_Spend', 'Facebook_Spend', 
                    'Weather', 'Competitor_A_Spend', 'Gas_Prices',
                    'Holiday', 'Email_Clicks', 'Brand_Awareness'
                ];
                
                const rejected = [
                    'TikTok_Impressions', 'Stock_Market', 'COVID_Cases'
                ];
                
                displayResults('Granger Causality', {
                    time: '45 min',
                    selected: 9,
                    total: 100,
                    useful: '6/9',
                    interpretability: 'p-values only',
                    reality: 'Tested each variable individually with 5 lags each. Found some temporal relationships but no effect sizes. Half the "significant" variables are probably false positives from multiple testing.',
                    winner: false
                });
                
                displayVariables(selected, rejected, 'Granger Causality');
                showLoading(false);
            }, 2000);
        };

        const simulateLASSO = () => {
            showLoading(true);
            
            setTimeout(() => {
                const selected = [
                    'TV_Spend', 'Google_Spend', 'Facebook_Spend',
                    'Email_Spend', 'Price', 'Promotions',
                    'Holiday', 'Weekend', 'Competitor_A_Price',
                    'Instagram_Spend', 'YouTube_Spend', 'Brand_Awareness'
                ];
                
                const rejected = [
                    'Weather', 'Stock_Market', 'COVID_Cases', 'Gas_Prices',
                    'Radio_Impressions', 'Direct_Mail_Clicks'
                ];
                
                displayResults('LASSO Regression', {
                    time: '30 sec',
                    selected: 12,
                    total: 100,
                    useful: '11/12',
                    interpretability: 'Coefficients + importance',
                    reality: 'Automatically selected important variables while zeroing out noise. Handles multicollinearity. Gives actual coefficients you can use for prediction.',
                    winner: true
                });
                
                displayVariables(selected, rejected, 'LASSO (L1 Regularization)');
                showLoading(false);
            }, 1000);
        };

        const simulateRidge = () => {
            showLoading(true);
            
            setTimeout(() => {
                const selected = [
                    'TV_Spend', 'Google_Spend', 'Facebook_Spend',
                    'Email_Spend', 'Instagram_Spend', 'YouTube_Spend',
                    'Price', 'Promotions', 'Holiday', 'Weekend',
                    'Competitor_A_Price', 'Competitor_B_Price',
                    'Brand_Awareness', 'Website_Traffic'
                ];
                
                const rejected = []; // Ridge keeps all but shrinks coefficients
                
                displayResults('Ridge Regression', {
                    time: '30 sec',
                    selected: 14,
                    total: 100,
                    useful: '13/14',
                    interpretability: 'Shrunken coefficients',
                    reality: 'Kept all variables but shrunk unimportant ones toward zero. Great for prediction, handles correlated variables well.',
                    winner: true
                });
                
                displayVariables(selected, rejected, 'Ridge (L2 Regularization)');
                showLoading(false);
            }, 1000);
        };

        const simulateBusinessLogic = () => {
            showLoading(true);
            
            setTimeout(() => {
                const selected = [
                    'TV_Spend', 'Google_Spend', 'Facebook_Spend',
                    'Email_Spend', 'Price', 'Promotions',
                    'Holiday', 'Competitor_A_Price'
                ];
                
                const rejected = [
                    'Weather', 'Stock_Market', 'Gas_Prices'
                ];
                
                displayResults('Business Logic + Common Sense', {
                    time: '5 min',
                    selected: 8,
                    total: 100,
                    useful: '8/8',
                    interpretability: 'Perfect - you know why',
                    reality: 'Asked the marketing team what they actually control and what matters. 100% interpretable, 100% actionable, 0% statistical BS.',
                    winner: true
                });
                
                displayVariables(selected, rejected, 'Business Logic');
                showLoading(false);
            }, 500);
        };

        // Add some animation on load
        window.addEventListener('load', () => {
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>